# 設計 {#chap:design}

第\ref{chap:background}章では、プログラムの処理領域と処理実行対象について延べ、新しいプログラミング環境の必要性について述べた。
本章では、この新しいプログラミング環境の設計について述べる。

<!-- 本章では、前章におけるヒューマンコンピュテーションやクラウドソーシングの研究動向を踏まえ、
人とプログラムとの新しいインタラクションを実現するためのプログラミング環境の要件を定義し、考察を行う。 -->

<!-- 思想について -->
<!-- 人間と計算機をうまく使うことであらゆる処理や手順・行動をプログラムするための方法について述べる -->

## 設計指針

<!--  
- 新しいプログラミング環境の設計に際して、指針を立てる
- 人間と計算機を処理実行対象とした時のあらゆる処理をプログラムで記述する際に必要と考えたものは以下
  - 明示的に人間をプログラム上で表現する
  - 人間と計算機への指示は同じように記述される
- 人間とプログラムのインタフェースを作りやすくする
  - デバイスが仲介することになる
  - そのデバイスごとに仕様が異なる
  - 各要素をモジュール化、換装可能にしておく必要がある。
- 以下の節にて、設計要素について詳しく述べる

-->

人間と計算機への指示を対等に記述し、あらゆる処理をプログラミングするための環境についての設計指針について述べる。
まず、人間を計算機とまったく同じような計算資源として利用可能にするためには、以下の要素が必要である。

- 処理内容の送信
- 処理対象の指定
- 処理結果の送信
- 記法の検討
- 人間の特性についての検討

これらの要素について、\ref{sec:program-human-interaction-design}節にて検討する。

また、人間とプログラムのインタフェースとなるデバイスが必要となる。
様々なデバイスがインタフェースとなりうるが、デバイスごとに仕様が異なる可能性がある。
このインタフェース部分を誰でも作りやすくするために、特に仕様が異なることの多い部分に関して、
換装可能なモジュールとして設計する必要がある。
この点について、\ref{sec:plaggable-module-design}節にて検討する。

## プログラムと人のインタラクション設計 {#sec:program-human-interaction-design}

### プログラムと人間のメッセージ交換

従来のプログラムでは、プログラムとして書かれた処理を実行する対象はコンピュータのみであった。
プログラムは実行されると、その内容に応じてコンピュータに対して「Aという処理をしてくれ」というメッセージを送り、
メッセージを受け取ったコンピュータはその処理結果を返す、といったモデルであると言える。

人間も実行対象とする環境においては、同じモデルを利用することが可能である。
つまり、プログラムの人間が処理するべき部分については、人間に対して「Aという処理をしてくれ」というメッセージを送り、
人間がそのメッセージを受け取り、人間が処理を行い、結果を返すといったモデルを構築することが出来れば良い。

しかし、プログラムから直接、人間にメッセージを送ることは現状では難しい。
そこで、本研究においては、 常時インターネット接続していてメッセージを受信可能なデバイスを仲介することによって、デバイス経由で人間にメッセージを送る手法を用いる。
つまり、デバイスを経由して指示内容を伝え、デバイスを経由して処理結果を入力させる、というプログラムと人間のメッセージ交換モデルを採用する。
このモデルによって、コンピュータと人はプログラム上において、同じ処理実行対象とすることが可能である。

### 具体的な人間リソースの指定

既存の人間を計算資源としてプログラムに組み込む仕組みでは、具体的な人物を指定して計算資源として扱うことはできなかった。
だが、本提案では、人間の日常活動などをプログラミングすることを想定している。
そのため、プログラムにおいて具体的な人間を宣言し、その人物への命令を記述できるような仕組みが必要となる。
例えば、 takumibaba という人物をインスタンス化し、そのインスタンスへの命令は全て takumibaba という人物への指示として
扱われるような仕組みを実装する必要がある。

### 統一的な記法

本研究では、人間とコンピュータを同じ計算資源として区別なく扱うことによって、新しいプログラミングの形を模索する。
現状では、人間とコンピュータへの指示は異なる記法によって実現している。
例えば、データベースに問い合わせて保存されているデータを取得するプログラムと同じようなプログラムで人間からデータを取得できるようにしたい。
例えば、センサーに問い合わせて部屋の温度を取得するようなプログラムと同じようなプログラムで人間にセンシングを命じれるようにする必要がある。
こういったことを、人間とコンピュータ、同じような命令構文によって実現する。

<!--
  - 人間とコンピュータは処理を実行するリソースとして同じになる
  - 完全に融合させたモデルを実現するには、区別なく同じような文法で人間とコンピュータへの命令を送れるべき
  -
 -->
<!--
- 人間と計算機を融合させたい
- 両者をプログラミングしていく上で、区別なく記述できるべき

人と計算機の両要素を融合させたプログラムを書くためには、
人と計算機、双方への指示を同じようなモデルで実行できるようにする必要がある。 -->

### 人の特性を組み込む
<!-- 遅延や後回し、エラーを許容する? -->
<!-- フォーマットの話もしたい -->

コンピュータに指示を送ることと人間に指示を送ることには大きな差がある。
例えば、実行の確実性だ。
コンピュータであれば、何かしらの指示を送れば実行されるだろう。
しかし、人間に何かしらの指示を送ったとしても、それがすぐに実行されるとは限らない。
コンピュータの場合、エラーが起こればそのエラーをプログラムにも通知してくれる。
しかし、人間の場合、エラーが起これば放置されてしまう可能性がある。
こういったこともプログラムとして記述できるようにするし、人間側からも通知できるようにする。

もうちょっと頑張って書く。
ダメなら項目消す。

## プラガブルなモジュール構成 {#sec:plaggable-module-design}
<!-- ## モジュール化と拡張性 -->

人間の日常的な活動もプログラムとして記述するとすれば、様々なデバイス上で人間とプログラムのメッセージ交換が可能である必要がある。
だが、近年、デバイスは多様化しており、その仕様も大きく異なる。
パソコンやスマートフォン、スマートウォッチなど、本研究において人間とプログラムのインタフェースとして
活用可能であると考えられるデバイスは多く存在する。
パソコンやスマートフォンでも、ユーザに提示すべきユーザインタフェースは大きく異なる。
また、通信の手法においてもその仕様は異なる。
パソコンであれば常にコネクションを張り続けることは可能だが、スマートフォンの場合、コネクションが切られてしまうこともある。

こういった状況を考慮して、デバイス依存しやすい部分については、交換可能なモジュールとして設計する必要がある。
交換可能なモジュールとして設計することで、デバイス依存の部分についてのみプログラムを書くだけで
様々なデバイスに対応することが可能となる。
また、交換可能なモジュール構成にしておくことで、応用アプリケーションも作りやすくなる。

本研究では、デバイス依存が強いと考えている以下の2点に関して、特別なモジュールとして扱う。

- 通信
- ユーザインタフェース

また、上記の2点以外の部分に関しても、プラグイン等の形で拡張可能にしておくことが望ましい。

### 通信

通信手法は各デバイスごとに大きく異なる。
出来れば、プログラムが実行され、人間に対するメッセージングが行なわれたらすぐに人にメッセージが届くべきである。
そのため、リアルタイム通信を前提にする必要がある。
例えば、パソコンのwebブラウザ上やサーバ上での実行であれば、通信手法が限られることはあまりない。
自由に通信の手法を選択することが可能である。
しかし、例えばスマートフォンの場合は、OSの仕様上、リアルタイム通信が切断されてしまうようなこともある。

その場の環境的に、通信がしにくいといった場合には、リアルタイム通信を前提とした通信手法は使いづらい。
遅延を前提とするような通信手法を選択できるべきである。

こういったことは、日常活動を送っていればよくあることである。
通信モジュールをプラガブルにし、様々な場面に対応したモジュールを簡単に作れるようにしておく必要がある。

### ユーザインタフェース

メッセージの提示や実行結果を入力する画面が必要となるが、このユーザインタフェースはデバイスごとに大きく異なる。
例えば、スクリーンサイズが要因として挙げられる。
比較的画面サイズに余裕のあるノートパソコンやデスクトップパソコンとまったく同じインタフェースをスマートフォン上で
表示させることは使い勝手を悪くする。
また、スマートフォンとスマートウォッチでも同様のことが言える。

利用可能なアプリケーションによっても異なる。
Webアプリケーションとして実装する場合、Webブラウザが使えればいい。
チャット上に実装したい場合は、ユーザインタフェースが大きく異なる。

## 新しいプログラミング環境

<!-- 人間と計算機、双方への処理を記述できる汎用処理記述フォーマットとしてのプログラムの可能性 -->
前節までの設計検討から、人間と計算機への指示を融合させた新しいプログラミング環境の要件について以下の様にまとめる。

まず、人間とプログラムのインタラクションの項目をまとめると、
プログラム上において人間とのインタラクションが可能なプログラムモジュールが必要となる。
また、そのプログラムモジュールとコミュニケーションする人間側のインタフェースが必要となる。
つまり、プログラムと人間の仲介を行うソフトウェアエージェントが必要となる。
プログラムモジュールは今までのプログラミングスタイルのまま使える必要がある。

- プログラム上で人間とのインタラクションを行うモジュール
- プログラムと人間の仲介を行うソフトウェアエージェント

次に、プラガブルなモジュールの項目から、ソフトウェアエージェントを動かすデバイスごとに異なる可能性の高い
モジュールに関しては、交換可能な要素である必要がある。
その要素としては以下のようなものが挙げられる。

- 通信手法
- ユーザインタフェース

最後に、拡張性の項目から、本提案で実装する各要素は拡張可能なものとして実装する。

## まとめ

本章では、新しいプログラミング環境に必要な要素についての検討を行った。
人間と計算機への指示を融合させたプログラミング環境について次章にて詳しく述べる。
