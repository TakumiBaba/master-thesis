\chapter{設計}\label{chap:design}

第\ref{chap:background}章では、プログラムの処理領域と処理実行対象について延べ、新しいプログラミング環境の必要性について述べた。
本章では、この新しいプログラミング環境の設計について述べる。

\section{設計指針}\label{ux8a2dux8a08ux6307ux91dd}

人間と計算機への指示を対等に記述し、あらゆる処理をプログラミングするための環境についての設計指針について述べる。
まず、人間を計算機とまったく同じような計算資源として利用可能にするためには、以下の要素が必要である。

\begin{itemize}
\itemsep1pt\parskip0pt\parsep0pt
\item
  処理内容の送信
\item
  処理対象の指定
\item
  処理結果の送信
\item
  人間の特性についての検討
\end{itemize}

これらの要素について、\ref{sec:program-human-interaction-design}節にて検討する。

また、人間とプログラムのインタフェースとなるデバイスが必要となる。
様々なデバイスがインタフェースとなりうるが、デバイスごとに仕様が異なる可能性がある。
このインタフェース部分を誰でも作りやすくするために、特に仕様が異なることの多い部分に関して、
換装可能なモジュールとして設計する必要がある。
この点について、\ref{sec:plaggable-module-design}節にて検討する。

\section{プログラムと人のインタラクション設計}\label{sec:program-human-interaction-design}

\subsection{プログラムと人間のメッセージ交換}\label{ux30d7ux30edux30b0ux30e9ux30e0ux3068ux4ebaux9593ux306eux30e1ux30c3ux30bbux30fcux30b8ux4ea4ux63db}

従来のプログラムでは、プログラムとして書かれた処理を実行する対象はコンピュータのみであった。
プログラムは実行されると、その内容に応じてコンピュータに対して「Aという処理をしてくれ」というメッセージを送り、
メッセージを受け取ったコンピュータはその処理結果を返す、といったモデルであると言える。

人間も実行対象とする環境においては、同じモデルを利用することが可能である。
つまり、プログラムの人間が処理するべき部分については、人間に対して「Aという処理をしてくれ」というメッセージを送り、
人間がそのメッセージを受け取り、人間が処理を行い、結果を返すといったモデルを構築することが出来れば良い。

しかし、プログラムから直接、人間にメッセージを送ることは現状では出来ない。
また、その逆も同じで、人間からプログラムへと直接メッセージを送ることも出来ない。
そこで、本研究においては、
常時インターネット接続していてメッセージを受信可能なデバイスを仲介することによって、
デバイス経由で人間にメッセージを送る。
つまり、デバイスを経由して指示内容を伝え、デバイスを経由して処理結果を入力させる、
というプログラムと人間のメッセージ交換モデルを採用する。

このような、人とプログラムがメッセージを相互に送り合えるモデルを構築することによって、
プログラム上において人を計算資源として扱えるようにする。

\subsection{具体的な人間リソースの指定}\label{ux5177ux4f53ux7684ux306aux4ebaux9593ux30eaux30bdux30fcux30b9ux306eux6307ux5b9a}

既存の人間を計算資源としてプログラムに組み込む仕組みでは、具体的な人物を指定して計算資源として扱うことはできなかった。
だが、本提案では、人間の日常活動などをプログラミングすることを想定している。
そのため、プログラムにおいて具体的な人間を宣言し、その人物への命令を記述できるような仕組みが必要となる。
例えば、 takumibaba
という人物をインスタンス化し、そのインスタンスへの命令は全て takumibaba
という人物への指示として 扱われるような仕組みを実装する必要がある。

\subsection{統一的な記法}\label{ux7d71ux4e00ux7684ux306aux8a18ux6cd5}

本研究では、人間とコンピュータを同じ計算資源として区別なく扱うことによって、新しいプログラミングの形を模索する。
現状では、人間とコンピュータへの指示は異なる記法によって実現している。
例えば、データベースに問い合わせて保存されているデータを取得するプログラムと
同じようなプログラムで人間からデータを取得できるようにしたい。
例えば、センサーに問い合わせて部屋の温度を取得するようなプログラムと同じようなプログラムで
人間にセンシングを命じれるようにする必要がある。
こういったことを、人間とコンピュータ、同じような命令構文によって実現する。

\subsection{人の特性を組み込む}\label{ux4ebaux306eux7279ux6027ux3092ux7d44ux307fux8fbcux3080}

コンピュータへの指示と人間への指示は、文法上は類似しているが異なる点もある。
人間にとってより値を返しやすかったり、性質を組み込んだ仕組みとして設計する必要がある。

例えば、実行の確実性だ。
コンピュータであれば、プログラムに書かれている指示通りにすぐに動く。
しかし、人間の場合、指示通りにすぐに動くとは言い切れない。
完全に同期的なプログラムの組み方では、プログラム全体の処理が遅延してしまうことが考えられる。
非同期的なプログラムとして記述することを前提とした設計をする必要がある。
また、一定時間経過したら指示をキャンセルし、他の作業を行わせるといったことが容易である必要がある。

\section{プラガブルなモジュール構成}\label{sec:plaggable-module-design}

人間の日常的な活動もプログラムとして記述するとすれば、様々なデバイス上で人間とプログラムのメッセージ交換が可能である必要がある。
だが、近年、デバイスは多様化しており、その仕様も大きく異なる。
パソコンやスマートフォン、スマートウォッチなど、本研究において人間とプログラムのインタフェースとして
活用可能であると考えられるデバイスは多く存在する。
パソコンやスマートフォンでも、ユーザに提示すべきユーザインタフェースは大きく異なる。
また、通信の手法においてもその仕様は異なる。
パソコンであれば常にコネクションを張り続けることは可能だが、スマートフォンの場合、コネクションが切られてしまうこともある。

こういった状況を考慮して、デバイス依存しやすい部分については、交換可能なモジュールとして設計する必要がある。
交換可能なモジュールとして設計することで、デバイス依存の部分についてのみプログラムを書くだけで
様々なデバイスに対応することが可能となる。
また、交換可能なモジュール構成にしておくことで、応用アプリケーションも作りやすくなる。

本研究では、デバイス依存が強いと考えている以下の2点に関して、特別なモジュールとして扱う。

\begin{itemize}
\itemsep1pt\parskip0pt\parsep0pt
\item
  通信
\item
  ユーザインタフェース
\end{itemize}

また、上記の2点以外の部分に関しても、プラグイン等の形で拡張可能にしておくことが望ましい。

\subsection{通信}\label{ux901aux4fe1}

通信手法は各デバイスごとに大きく異なる。
出来れば、プログラムが実行され、人間に対するメッセージングが行なわれたらすぐに人にメッセージが届くべきである。
そのため、リアルタイム通信を前提にする必要がある。
例えば、パソコンのwebブラウザ上やサーバ上での実行であれば、通信手法が限られることはあまりない。
自由に通信の手法を選択することが可能である。
しかし、例えばスマートフォンの場合は、OSの仕様上、リアルタイム通信が切断されてしまうようなこともある。

その場の環境的に、通信がしにくいといった場合には、リアルタイム通信を前提とした通信手法は使いづらい。
遅延を前提とするような通信手法を選択できるべきである。

こういったことは、日常活動を送っていればよくあることである。
通信モジュールをプラガブルにし、様々な場面に対応したモジュールを簡単に作れるようにしておく必要がある。

\subsection{ユーザインタフェース}\label{ux30e6ux30fcux30b6ux30a4ux30f3ux30bfux30d5ux30a7ux30fcux30b9}

メッセージの提示や実行結果を入力する画面が必要となるが、このユーザインタフェースはデバイスごとに大きく異なる。
例えば、スクリーンサイズが要因として挙げられる。
比較的画面サイズに余裕のあるノートパソコンやデスクトップパソコンとまったく同じインタフェースをスマートフォン上で
表示させることは使い勝手を悪くする。
また、スマートフォンとスマートウォッチでも同様のことが言える。

利用可能なアプリケーションによっても異なる。
Webアプリケーションとして実装する場合、Webブラウザが使えればいい。
チャット上に実装したい場合は、ユーザインタフェースが大きく異なる。

\section{新しいプログラミング環境の要件}\label{ux65b0ux3057ux3044ux30d7ux30edux30b0ux30e9ux30dfux30f3ux30b0ux74b0ux5883ux306eux8981ux4ef6}

前節までの設計検討から、人間と計算機への指示を融合させた新しいプログラミング環境の要件について以下の様にまとめる。

まず、\ref{sec:program-human-interaction-design}節をまとめると以下の要件が必要となる。

\begin{itemize}
\itemsep1pt\parskip0pt\parsep0pt
\item
  プログラムと人間の間のメッセージ交換の仕組み
\item
  メッセージ交換する人間を具体的に指定可能
\item
  人間とコンピュータへの指示手法の統一
\end{itemize}

まず、人間とプログラムのインタラクションの項目をまとめると、
プログラム上において人間とのインタラクションが可能なプログラムモジュールが必要となる。
また、そのプログラムモジュールとコミュニケーションする人間側のインタフェースが必要となる。
つまり、プログラムと人間の仲介を行うソフトウェアエージェントが必要となる。
プログラムモジュールは今までのプログラミングスタイルのまま使える必要がある。

\begin{itemize}
\itemsep1pt\parskip0pt\parsep0pt
\item
  プログラム上で人間とのインタラクションを行うモジュール
\item
  プログラムと人間の仲介を行うソフトウェアエージェント
\end{itemize}

次に、プラガブルなモジュールの項目から、ソフトウェアエージェントを動かすデバイスごとに異なる可能性の高い
モジュールに関しては、交換可能な要素である必要がある。
その要素としては以下のようなものが挙げられる。

\begin{itemize}
\itemsep1pt\parskip0pt\parsep0pt
\item
  通信手法
\item
  ユーザインタフェース
\end{itemize}

最後に、拡張性の項目から、本提案で実装する各要素は拡張可能なものとして実装する。

\section{まとめ}\label{ux307eux3068ux3081}

本章では、新しいプログラミング環境に必要な要素についての検討を行った。
人間と計算機への指示を融合させたプログラミング環境について次章にて詳しく述べる。
